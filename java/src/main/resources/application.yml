spring:
  application:
    name: neuromemory-server

  r2dbc:
    url: r2dbc:postgresql://${DATABASE_HOST:localhost}:${DATABASE_PORT:5432}/${DATABASE_NAME:neuromemory}
    username: ${DATABASE_USER:neuromemory}
    password: ${DATABASE_PASSWORD:neuromemory}
    pool:
      initial-size: 10
      max-size: 50
      max-idle-time: 30m

  security:
    user:
      name: admin
      password: admin

server:
  port: ${SERVER_PORT:8765}

# Logging
logging:
  level:
    root: INFO
    com.neuromemory: DEBUG
    org.springframework.r2dbc: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

# Management endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true

# Application specific
neuromemory:
  embedding:
    provider: ${EMBEDDING_PROVIDER:siliconflow}
    api-key: ${SILICONFLOW_API_KEY:}
    model: ${EMBEDDING_MODEL:BAAI/bge-m3}
    dimension: ${EMBEDDING_DIMENSION:1024}
    api-url: ${SILICONFLOW_API_URL:https://api.siliconflow.cn/v1/embeddings}

  security:
    api-key:
      header: Authorization
      prefix: "Bearer "

  graph:
    name: neuromemory_graph
